<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Uno Game</title>
  </head>
  <body>
    <h1>Uno Game</h1>
    <input type="text" id="playerNameInput" placeholder="Enter your name" />
    <button id="joinGameBtn">Join Game</button>

    <div id="playerIdDisplay" style="display: none"></div>
    <div id="playerList"></div>
    <!-- Add a div to display player ID -->

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
      let clientId = document
        .getElementById("joinGameBtn")
        .addEventListener("click", () => {
          const playerName = document
            .getElementById("playerNameInput")
            .value.trim();
          if (playerName) {
            socket.emit("joinGame", playerName);
          } else {
            alert("Please enter your name");
          }
          const playerIdDisplay = document.getElementById("playerIdDisplay");
          playerIdDisplay.style.display = "block";
        });

      socket.on("playerJoined", (playerName) => {
        console.log(`${playerName} joined the game`);
      });

      socket.on("yourId", (clientId) => {
        // Display the client ID on the HTML page

        document.getElementById("playerIdDisplay").innerText =
          "Your assigned ID is: " + clientId;

        socket.on("playersData", (players) => {
          const playerList = document.getElementById("playerList");
          playerList.innerHTML = "<p>All players:</p>";
          console.log(players);
          console.log("clientId : ", clientId);
          players.forEach((player) => {
            let numberList = "";

            player.number.forEach((num) => {
              numberList += `<li><p>${num}</p></li>`;
            });

            let playerInfo = `<p>Name: ${player.name}, id: ${
              player.id === clientId ? player.id : "x"
            }</p>`;
            playerInfo += `<ul>${
              player.id === clientId ? numberList : "<li><p>xxx</p></li>"
            }</ul>`;

            playerList.innerHTML += playerInfo;
          });
        });
      });
    </script>
  </body>
</html>